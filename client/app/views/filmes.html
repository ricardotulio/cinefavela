<link rel="stylesheet" href="styles/filmes.css">
<div class="container-fluid main">
    <div class="navbar-fixed">
      <nav class="red lighten-1">
        <div class="nav-wrapper container">
          <ul class="right hide-on-med-and-down">
            <li ng-hide="usuarioLogado"><a href="javascript:void(0)" ng-click="abrirFormularioCadastro()">Cadastrar-se</a></li>          
            <li ng-hide="usuarioLogado"><a href="javascript:void(0)" ng-click="abrirFormularioLogin()">Entrar</a></li>
            <li ng-show="usuarioLogado"><a href="javascript:void(0)" ng-click="logout()">Sair</a></li>            
          </ul>
        </div>
    </div>    
<div class="content">
  <div id="wrapper" ng-hide="filmes.length == 0">
    <div id="columns">
      <filme ng-repeat="filme in filmes" filme="filme"></filme>
    </div>
  </div>
  <div class="container" ng-show="filmes.length == 0">
    <h1>Ops... não há nenhum filme inscrito. <a href="javascript:void(0)" ng-click="abrirFormularioInscricao()">Clique aqui e seja o primeiro a se inscrever.</a></h1>
  </div>

  <a id="btn-logar" class="btn-floating btn-large waves-effect waves-light blue hide" ng-click="abrirFormularioInscricao()"><i class="material-icons">add</i></a>
  <br>
  <a id="btn-sign-in" class="btn-floating btn-large waves-effect waves-light blue hide" onclick="javascript: $('#modal-sign-in').openModal();"><i class="material-icons">add</i></a>
  <br>
  <a id="btn-watch-video" class="btn-floating btn-large waves-effect waves-light blue hide" onclick="javascript: $('#modal-watch-video').openModal();"><i class="material-icons">add</i></a>

  <a id="btn-inscrever-filme" class="btn-floating btn-large waves-effect waves-light blue" ng-click="abrirFormularioInscricao()"><i class="material-icons">add</i></a>

  <div id="modal-inscrever-filme" class="modal modal-fixed-footer modal-inscrever-filme" ng-controller="InscreverFilmeController" ng-init="init(filmes)">
    <div class="modal-content">
      <h4>Inscreva seu filme</h4>
      <form name="form" class="col s12">
        <div class="row">
          <div class="input-field col s12">
            <input placeholder="Informe o título do seu filme" id="titulo" ng-model="filme.titulo" type="text" class="validate" ng-minlength="1" ng-maxlength="120" required="">
            <label for="titulo">Titulo</label>
            <small class="grey-text right">* este campo é obrigatório e deve possuir no máximo 120 caracteres.</small>
          </div>
        </div>

        <div class="row">
          <div class="input-field col s12">
            <textarea placeholder="Faça uma sinopse do seu filme" ng-model="filme.sinopse" id="sinopse" type="text" class="materialize-textarea validate" ng-minlength="140" ng-maxlength="1024" required=""></textarea>
            <label for="sinopse">Sinopse</label>
            <small class="grey-text right">* este campo é obrigatório e deve ter entre 140 e 1024 caracteres.</small>
          </div>
        </div>
        <div class="row">
                <div class="input-field col s12">
          <label>Gênero</label>
        </div>
        </div>
      <div class="row">
        <div class="input-field col s12">
          <input type="checkbox" class="filled-in" id="acao" name="generos[1]" ng-model="filme.generos[1]" />
          <label for="acao">Ação</label>

          <input type="checkbox" class="filled-in" id="aventura" name="generos[2]" ng-model="filme.generos[21]"/>
          <label for="aventura">Aventura</label>

          <input type="checkbox" class="filled-in" id="comedia" name="generos[3]" ng-model="filme.generos[3]"/>
          <label for="comedia">Comédia</label>

          <input type="checkbox" class="filled-in" id="documentario" name="genero[4]" ng-model="filme.generos[4]"/>
          <label for="documentario">Documentário</label>

          <input type="checkbox" class="filled-in" id="drama" name="genero[5]" ng-model="filme.generos[5]"/>
          <label for="drama">Drama</label>                

          <input type="checkbox" class="filled-in" id="suspense" name="generos[6]" ng-model="filme.generos[6]"/>
          <label for="suspense">Suspense</label>  

          <input type="checkbox" class="filled-in" id="terror" name="generos[7]" ng-model="filme.generos[7]"/>
          <label for="terror">Terror</label>

          <input type="checkbox" class="filled-in" id="outro" name="generos[1000]" ng-model="filme.generos[1000]"/>
          <label for="outro">Outro</label>          
        </div>
      </div>

      <div class="row">
        <div class="input-field col s12">
          <input placeholder="Cole aqui o link para o seu filme no YouTube" ng-model="filme.linkYoutube" ng-change="exibePreVisualizacao()" id="linkYoutube" type="text"
          class="validate" required="">
          <label for="linkYoutube">Link do YouTube</label>
        </div>
      </div>
      <div ng-show="carregandoVideo" class="row center-align">
        <div class="preloader-wrapper big active">
          <div class="spinner-layer spinner-blue-only">
            <div class="circle-clipper left">
              <div class="circle"></div>
            </div>
            <div class="gap-patch">
              <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
              <div class="circle"></div>
            </div>
          </div>
        </div>
      </div>
      <div ng-show="exibirVideo" class="row">
        <div class="video-container">
          <iframe width="853" height="480" ng-src="{{filme.linkYoutube}}" frameborder="0" allowfullscreen></iframe>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
     <a href="javascript:void(0)" class="modal-action btn-login btn waves-effect waves-light col s12" ng-click="inscrever()">Inscrever Filme</a>
  </div>
  </div>

  <div id="modal-login" class="modal modal-fixed-footer" ng-controller="AutenticacaoController">
   <div class="modal-content loading col s12 m6 l4">
    <div class="preloader-wrapper big active">
    <div class="spinner-layer spinner-blue-only">
      <div class="circle-clipper left">
        <div class="circle"></div>
      </div><div class="gap-patch">
        <div class="circle"></div>
      </div><div class="circle-clipper right">
        <div class="circle"></div>
      </div>
    </div>
  </div>
   </div>
   <div class="modal-content col s12 m6 l4">
     <h4>Efetuar Login</h4>
     <form class="login-form">
     <div class="row margin">
      <div class="input-field col s12">
        <i class="material-icons prefix">email</i>
        <input id="email" type="email" ng-model="usuario.email" placeholder="Informe o seu e-mail">
        <label for="email">E-Mail</label>
      </div>
    </div>
    <div class="row margin">
      <div class="input-field col s12">
        <i class="material-icons prefix">lock_outline</i>
        <input id="password" type="password" ng-model="usuario.senha" placeholder="Informe sua senha">
        <label for="password">Senha</label>
      </div>
    </div>
    <div class="hide row">          
      <div class="input-field col s12 m12 l12  login-text">
        <input type="checkbox" id="remember-me">
        <label for="remember-me">Lembre-me </label>
      </div>
    </div>
  </form>
  <p ng-show="erroLogin" class="red-text center-align flow-text">Login e/ou senha inválidos.</p>
  </div>
  <div class="modal-footer">
    <a href="javascript:void(0)" class="left modal-action modal-close btn-login btn waves-effect waves-light red lighten-1 col s12" ng-click="cadastrarSe()">Cadastrar-se</a>
    <a href="javascript:void(0)" class="modal-action btn-login btn waves-effect waves-light col s12" ng-click="login(usuario)">Fazer Login</a>
  </div>
  </div>

  <div id="modal-cadastro" class="modal modal-fixed-footer" ng-controller="CadastrarUsuarioController">
  <form name="form" ng-submit="cadastrar(novoUsuario)">
     <div class="modal-content loading col s12 m6 l4">
      <div class="preloader-wrapper big active">
      <div class="spinner-layer spinner-blue-only">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>
    </div> 
    </div> 
    <div class="modal-content">
      <h4>Cadastre-se</h4>
      <div class="row">
       <div class="input-field col s12">
          <i class="material-icons prefix">account_circle</i>
          <input id="icon_prefix" type="text" id="nome" name="nome" class="validate" ng-class="{'invalid': (form.$submitted || form.nome.$touched) &&  !form.nome.$valid}" ng-model="novoUsuario.nome" placeholder="Informe o seu nome completo" ng-maxlength="60" required="">
          <label for="icon_prefix">Nome</label>
          <small class="grey-text right">* este campo é obrigatório e deve possuir no máximo 60 caracteres.</small>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">email</i>
        <input id="email" type="email" class="validate" ng-model="novoUsuario.email" placeholder="Informe o seu e-mail" ng-class="{'invalid': (form.$submitted || form.email.$touched) && !form.email.$valid}" required="">
        <label for="email">E-Mail</label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">lock</i>
        <input id="password" type="password" id="senha" name="senha" class="validate" ng-model="novoUsuario.senha" placeholder="Informe uma senha para o seu usuário" ng-class="{'invalid': (form.$submitted || form.senha.$touched) && !form.senha.$valid}" ng-minlenght="6" ng-maxlength="10" required="">
        <label for="password">Senha</label>
        <small class="grey-text right">* este campo é obrigatório e deve ter entre 6 e 10 caracteres.</small>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">lock_outline</i>
        <input id="confirm-password" type="password" id="confirmaSenha" name="confirmaSenha" class="validate" ng-class="{'invalid': (form.$submitted || form.confirmaSenha.$touched) && !form.confirmaSenha.$valid}"  ng-model="novoUsuario.confirmacaoSenha" placeholder="Informe a senha novamente" required="" match-password="senha">
        <label for="confirm-password">Confirmar Senha</label>
      </div>
    </div>
    <p ng-show="emailJaCadastrado" class="red-text center-align flow-text">Este e-mail já está cadastrado.</p>

  </div>
  <div class="modal-footer">
    <a href="javascript:void(0)" class="left modal-action modal-close btn waves-effect waves-light red lighten-1 col s12" ng-click="abrirFormularioLogin()">Já estou cadastrado</a>
   <button type="submit" class="btn waves-effect waves-light col s12">Cadastrar-se</a>
  </div>
  </form>
</div>
  <div id="modal-watch-video" class="s12 s6 l6 modal watch-video">
    <div class="modal-content">
     <div class="video-container">
      <iframe id="assistir-filme" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
    </div>
    <a href="javascript:void(0)" id="btn-fechar" class="modal-action" ng-click="fechaAssistirFilme()">X</a>
  </div>
  </div>
</div>
</div>
  <footer class="footer red lighten-1 row">
    <div class="col s12 m8 offset-m2 l6 offset-l3">
      <div class="social-network">
        <div class="social-network-item social-network-youtube">
          <a href="http://www.youtube.com" target="_blank" title="YouTube" class="si-circle si-large si-colored si-youtube"></a>
        </div>
        <div class="social-network-item social-network-facebook">
          <a href="http://www.facebook.com" target="_blank" title="Facebook" class="si-circle si-large si-colored si-facebook"></a>
        </div>
        <div class="social-network-item social-network-twitter">
          <a href="http://www.twitter.com" target="_blank" title="Twitter" class="si-circle si-large si-colored si-twitter"></a>
        </div>
        <div class="social-network-item social-network-instagram">
          <a href="http://www.instagram.com" target="_blank" title="Instagram" class="si-circle si-large si-colored si-instagram"></a>
        </div>
      </div>
      <div class="row">
        <p class="center-align">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut at imperdiet arcu. Curabitur maximus ipsum sollicitudin lectus
          dignissim, ultrices mattis dui pretium. Praesent a commodo erat, vitae placerat magna. Vivamus lacinia nec diam
          et maximus.
        </p>
      </div>
    </div>
  </footer>
  <div class="copyright row red valign-wrapper">
    <div class="container">
      Todos os direitos reservados
    </div>
  </div>